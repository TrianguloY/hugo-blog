<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
   Â· johndoe
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="amt8u">
<meta name="description" content="The behaviourLink to headingCopy the code below and run it in a fresh browser window.
var obj = {a:22}; var p1 = new Promise((res, rej) =&gt; { res(55); }).then((val) =&gt; { obj.a = val; }); console.log(&#34;obj object&#34;, obj); console.log(&#34;obj.a&#34;, obj.a); The above snippet would output something like below
Since the assignment obj.a is within the then block, seeing value 22 in the logged output is perfectly fine. And of course once the promise is run, after that if you log the object you will see the updated value 55.">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"><meta name="twitter:title" content="">
<meta name="twitter:description" content="The behaviourLink to headingCopy the code below and run it in a fresh browser window.
var obj = {a:22}; var p1 = new Promise((res, rej) =&gt; { res(55); }).then((val) =&gt; { obj.a = val; }); console.log(&#34;obj object&#34;, obj); console.log(&#34;obj.a&#34;, obj.a); The above snippet would output something like below
Since the assignment obj.a is within the then block, seeing value 22 in the logged output is perfectly fine. And of course once the promise is run, after that if you log the object you will see the updated value 55.">

<meta property="og:url" content="//localhost:1313/posts/wierd-console-log-behavior/weird-console-log-behaviour/">
  <meta property="og:site_name" content="johndoe">
  <meta property="og:title" content="johndoe">
  <meta property="og:description" content="The behaviourLink to headingCopy the code below and run it in a fresh browser window.
var obj = {a:22}; var p1 = new Promise((res, rej) =&gt; { res(55); }).then((val) =&gt; { obj.a = val; }); console.log(&#34;obj object&#34;, obj); console.log(&#34;obj.a&#34;, obj.a); The above snippet would output something like below
Since the assignment obj.a is within the then block, seeing value 22 in the logged output is perfectly fine. And of course once the promise is run, after that if you log the object you will see the updated value 55.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">




<link rel="canonical" href="//localhost:1313/posts/wierd-console-log-behavior/weird-console-log-behaviour/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="//localhost:1313/">
      johndoe
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/amt8u/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact me</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/pt-br/">ðŸ‡§ðŸ‡·</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="//localhost:1313/posts/wierd-console-log-behavior/weird-console-log-behaviour/">
              
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="0001-01-01T00:00:00Z">
                January 1, 0001
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <h1 id="the-behaviour">
  The behaviour
  <a class="heading-link" href="#the-behaviour">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Copy the code below and run it in a fresh browser window.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">22</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">res</span><span class="p">,</span> <span class="nx">rej</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">val</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">obj</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;obj object&#34;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;obj.a&#34;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
</span></span></code></pre></div><p>The above snippet would output something like below</p>
<p><img alt="Default output" src="./images/wierd-console-log-behavior/console.log_output.png"></p>
<p>Since the assignment <code>obj.a</code> is within the <code>then</code> block, seeing value <code>22</code> in the logged output is perfectly fine. And of course once the promise is run, after that if you log the object you will see the updated value <code>55</code>. But Now try expanding the same object using the arrow and see the magic.</p>
<p><img alt="Exapanded output" src="./images/wierd-console-log-behavior/console.log_output__expanded.png"></p>
<p>In case you didnlt notice:-D, I have marked it with red outline.</p>
<p>If you do the same exercise with a complex object like <code>window</code>, you will get similar result with a small difference.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">res</span><span class="p">,</span> <span class="nx">rej</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">val</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">aNewValue</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;window object&#34;</span><span class="p">,</span> <span class="nb">window</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;window.aNewValue&#34;</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">aNewValue</span><span class="p">);</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p><img alt="window" src="./images/wierd-console-log-behavior/window_aNewValue.png"></p>
<p>Expand the object and see if the <code>window</code> object has <code>aNewValue</code> property. To your surprise the field would be there with the value <code>55</code>.</p>
<p><img alt="window" src="./images/wierd-console-log-behavior/window_expanded_aNewValue.png"></p>
<p>Now you would ask the question if the value is there in the object on line#7 then it should be there on line#8 too. Why did the second log statement print <code>undefined</code>?</p>
<h1 id="the-reason">
  The reason
  <a class="heading-link" href="#the-reason">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>As per my understanding, the reason seems to be the implementation of <code>console.log</code>.</p>
<p>Whenever you log an object on the console, you see a small preview of the object</p>
<p><img alt="object preview" src="./images/wierd-console-log-behavior/window_preview.png"></p>
<!-- raw HTML omitted -->
<p>But if you want to see all the properties, you expand the object.</p>
<p><img alt="object expanded" src="./images/wierd-console-log-behavior/window_expanded.png"></p>
<!-- raw HTML omitted -->
<p>Notice that the order of the values in the preview is different than the order in the expanded object. I am not sure how this order is determined.</p>
<p>The preview seems to be constructed while logging the object syncronously while rest of the values are read only when you click on the expand icon. And thats why accessing the property value at that point of time gave <code>22</code> and not <code>55</code>. Do note that the expression <code>obj.a</code> results in a primitive value which is passed to the console.log function as a value and not reference.</p>
<p>Alternatively if you want the exact copy of your object in any point in time, you can use <code>JSON.stringify()</code> to serialize the object and then <code>JSON.parse()</code> to convert the string back to an object which you can expand and close but with the correct values.</p>
<p>With a simple object like <code>obj</code>, its easy to identify while with complex objects like <code>window</code>, you won&rsquo;t be able to see the issue since your random properties are not included in the preview.</p>
<p>Now, you must got the answer to the question - why the second log statement <code>console.log(obj.a)</code> printed <code>undefined</code>. At that time the value of <code>a</code> was undefined and the <code>console.log</code> function is called with a string as a parameter. If the property <code>a</code> itself would have been an object, it would also face the same issue. Objects are passed by reference while primitives are passed by values.</p>
<h1 id="some-other-helpful-links">
  Some other helpful links
  <a class="heading-link" href="#some-other-helpful-links">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<ul>
<li>
<p><a href="https://stackoverflow.com/questions/23429203/weird-behavior-with-objects-console-log"  class="external-link" target="_blank" rel="noopener">https://stackoverflow.com/questions/23429203/weird-behavior-with-objects-console-log</a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays"  class="external-link" target="_blank" rel="noopener">https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays</a></p>
</li>
</ul>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
      2019 -
    
    2024
     amt8u 
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
