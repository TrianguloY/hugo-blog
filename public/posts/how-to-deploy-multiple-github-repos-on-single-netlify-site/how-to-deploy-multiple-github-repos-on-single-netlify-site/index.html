<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
   Â· johndoe
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="amt8u">
<meta name="description" content="WarningLink to headingFirst I will talk about the recommended way which apparently didn&rsquo;t work for me, but I figured out another approach which was best suited for my requirement.
The needLink to headingSince I have my blog up and running, I can now focus on creating articles which might involve some working examples. Its always helpful to present the reader with a live example where he could test out the working.">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"><meta name="twitter:title" content="">
<meta name="twitter:description" content="WarningLink to headingFirst I will talk about the recommended way which apparently didn&rsquo;t work for me, but I figured out another approach which was best suited for my requirement.
The needLink to headingSince I have my blog up and running, I can now focus on creating articles which might involve some working examples. Its always helpful to present the reader with a live example where he could test out the working.">

<meta property="og:url" content="//localhost:1313/posts/how-to-deploy-multiple-github-repos-on-single-netlify-site/how-to-deploy-multiple-github-repos-on-single-netlify-site/">
  <meta property="og:site_name" content="johndoe">
  <meta property="og:title" content="johndoe">
  <meta property="og:description" content="WarningLink to headingFirst I will talk about the recommended way which apparently didnâ€™t work for me, but I figured out another approach which was best suited for my requirement.
The needLink to headingSince I have my blog up and running, I can now focus on creating articles which might involve some working examples. Its always helpful to present the reader with a live example where he could test out the working.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">




<link rel="canonical" href="//localhost:1313/posts/how-to-deploy-multiple-github-repos-on-single-netlify-site/how-to-deploy-multiple-github-repos-on-single-netlify-site/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="//localhost:1313/">
      johndoe
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/amt8u/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact me</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/pt-br/">ðŸ‡§ðŸ‡·</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="//localhost:1313/posts/how-to-deploy-multiple-github-repos-on-single-netlify-site/how-to-deploy-multiple-github-repos-on-single-netlify-site/">
              
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="0001-01-01T00:00:00Z">
                January 1, 0001
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <h1 id="warning">
  Warning
  <a class="heading-link" href="#warning">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>First I will talk about the recommended way which apparently didn&rsquo;t work for me, but I figured out another approach which was best suited for my requirement.</p>
<h1 id="the-need">
  The need
  <a class="heading-link" href="#the-need">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Since I have my blog up and running, I can now focus on creating articles which might involve some working examples. Its always helpful to present the reader with a live example where he could test out the working. I will be writing on various topics from simple javascript concepts like hoisting, inheritance etc to complex full scale apps involving various libraries and deployment cycles.</p>
<p>For trivial things like code snippets, the best way right now would be a codepen snippet. Easily shareable and maintainable. With the amount of configuration available, you can tecnically create full projects on it too.</p>
<p>But I wanted to have more control where I can host apps and maybe in future host services too, which would connect to the app for data management.</p>
<h1 id="github-pages">
  Github pages
  <a class="heading-link" href="#github-pages">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Github would be the best option if you have static files to deploy. It does provide jekyll build though. I have not used it till now and not sure if github supports npm/yarn builds. A good article about github pages can be found <a href="https://blog.kushalbhalaik.xyz/github-pages-a-comprehensive-guide-w-images-part-2/"  class="external-link" target="_blank" rel="noopener">here</a>.</p>
<h1 id="netlify">
  Netlify
  <a class="heading-link" href="#netlify">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>After using netlify for sometime, I could say that for static sites its one of the easiest platforms to use. Specially the interface. You just need to authorise your github account and done. With every push you will get a new build deployed.</p>
<p>It supports various frameworks like <em>react</em>, <em>vue</em>, <em>next</em>, <em>gatsby</em> etc. I won&rsquo;t say it is a zero config platform, but definitely a convenient one. There are other features that I like about netlify -</p>
<ul>
<li>Auto deployment</li>
<li>Free and <em>automatic</em> SSL configuration</li>
<li>Smooth custom domain integration</li>
<li>Generous limits for free tier</li>
<li>Forms submission - Though I am yet to try it out</li>
</ul>
<p>So basically in layman terms - You commit your change in some <code>.jsx</code> file and push it to your repository, netlify will trigger the build on their server and publish the build folder to make your site live.</p>
<h1 id="the-repository-connection">
  The repository connection
  <a class="heading-link" href="#the-repository-connection">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Netlify&rsquo;s model is built around the thought - <strong>One site for one repo</strong>. And my requirement contradicts that thought.</p>
<ul>
<li>Have single main repository deployed on one site</li>
<li>Have other repositories deployed on sub-directories</li>
</ul>
<p>The second requirement cannot be fulfilled because netlify doesn&rsquo;t allow deploying on sub directories. Though with mono repo support just added which allows deploying parts of a single repo on different sites.</p>
<h1 id="proxies">
  Proxies
  <a class="heading-link" href="#proxies">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>While searching over my options I landed up on a community <a href="https://community.netlify.com/t/support-guide-can-i-deploy-multiple-repositories-in-a-single-site/179"  class="external-link" target="_blank" rel="noopener">post</a> which presented to me a new config option - Proxies.</p>
<p>What proxy does is essentially re-directs your http request to another URL without changing the original URL. So for the browser it would look like that the response is from the same server but internally netlify connects with different website.</p>
<p>At first glance it looked like this solved my problem. I could create re-direct rules in my main repo while I can host my other apps on netlify with their <code>.netlify.app</code> URL. The main repo will serve a homepage and sub-paths would serve other projects.</p>
<h1 id="redirect-rule">
  Redirect rule
  <a class="heading-link" href="#redirect-rule">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>You need to create a plaintext file <code>_redirects</code> in your main repo. While deploying the repo, netlify will read the redirect configuration and will create internal redirects.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="l">/speed-maths/*  https://speed-maths.netlify.app/:splat  200</span><span class="w">
</span></span></span></code></pre></div><p>But the problem with this approach is that the first page would be served perfectly, but the other links on the page will break. For example, the static file links such as css and js files will have a malformed URL.</p>
<p>This problem could be solved by deploying the project in sub directory and would need changes in many places. It would also mean that you will have to change the config for each repo every time if you would want to deploy them on their own site.</p>
<p>There is a <a href="https://github.com/facebook/create-react-app/issues/165"  class="external-link" target="_blank" rel="noopener">workaround</a> though but that also would need a sub-directory to be created.</p>
<h1 id="final-solution">
  Final solution
  <a class="heading-link" href="#final-solution">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>I am still trying to search for a better solution but for now I used the below approach to deal with it</p>
<ul>
<li>Keep your repos as it is</li>
<li>Build projects locally by changing the <code>homepage</code> in package.json to &ldquo;.&rdquo;</li>
<li>Add the <code>build</code> folder to main repo</li>
<li>Update main repo with new links</li>
<li>Push the main repo</li>
<li>Netlify will auto deploy to one main site</li>
</ul>
<p>Do note that you may want to revert the <code>homepage</code> property change in package.json if you would like to keep the absolute URLs in your build. More info available on <a href="https://create-react-app.dev/docs/deployment/#building-for-relative-paths"  class="external-link" target="_blank" rel="noopener">CRA docs for relative paths</a></p>
<p>With this procedure, there is only one caveat, that I will lose the netlify&rsquo;s auto build feature. But at least I would get the site to work as per my requirement.</p>
<p>Now my demo site to complement all my articles with its own namespace is <a href="https://cybr.cafe"  class="external-link" target="_blank" rel="noopener">live</a>.</p>
<blockquote>
<p>End</p>
</blockquote>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
      2019 -
    
    2024
     amt8u 
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
